<div layout="row" layout-align="center center" layout-wrap class="breadcrumb">
    <a href="/" layout="row" layout-align="start center">
        <svg style="width:20px;height:20px" viewBox="0 0 24 24">
            <path fill="#525050" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" />
        </svg>
        Home
    </a>
    <span>&nbsp;&gt;&nbsp;</span>
    <a data-ng-href="{{::product.category.url}}">{{::product.category.display_name}}</a>
    <span>&nbsp;&gt;&nbsp;</span>
    <span>{{::product.display_name }}</span>
</div>

<div layout="row" layout-align="center start" layout-wrap>

</div>

<div layout="row" flex ng-if="product" layout-wrap class="product-page-card">
    <div flex-xs="100" flex-sm="45" flex-gt-sm="45" wu-gallery image='product.image' layout="row" class="gallery-wrap"></div>
    <div layout="column" flex-xs="100" flex class="product-page-card-content">
        <div layout="row" layout-padding>
            <h1 class="product-display-name">{{::product.display_name }}</h1>
        </div>
        <div layout="row" ng-if="!loggedIn" layout-padding>
            <span class="bold"><span class="underline cursor-pointer" ng-click="openLoginPopup($event)">Login</span> to view prices</span>
        </div>
        <div layout="row" layout-wrap layout-padding ng-if="loggedIn">
            <div flex flex-xs="50" layout="column">
                <span class="feature-title">Min Price</span>
                <span class="product-price">Rs. {{::product.min_price_per_unit}}</span>
            </div>
            <div flex flex-xs="50" layout="column">
                <span class="feature-title">Retail Price</span>
                <span>Rs. {{::product.price_per_unit}}</span>
            </div>
            <div flex flex-xs="50" layout="column">
                <span class="feature-title">Your Margin</span>
                <span>{{::product.margin |  number:0}}%</span>
            </div>
        </div>
        <div layout="row" layout-wrap layout-padding>
            <div flex="33" flex-xs="50" layout="column">
                <span class="feature-title">Fabric</span>
                <span>{{::product.fabric_gsm}}</span>
            </div>
            <div flex="33" flex-xs="50" layout="column">
                <span class="feature-title">Sizes</span>
                <span>{{::product.sizes}}</span>
            </div>
            <div flex="33" flex-xs="50" layout="column">
                <span class="feature-title">Color</span>
                <span>{{::product.colors}}</span>
            </div>
            <div flex="33" flex-xs="50" layout="column">
                <span class="feature-title">Brand</span>
                <span>{{::product.brand}}</span>
            </div>
            <div flex="33" flex-xs="50" layout="column">
                <span class="feature-title">Lot Size</span>
                <span>{{::product.lot_size}}</span>
            </div>
        </div>
        <div layout="row" layout-wrap>
            <span flex="100" class="text-center">Wholesale Pricing</span>
            <div layout="row" ng-if="!loggedIn" layout-padding flex="100">
                <span class="bold"><span class="underline cursor-pointer" ng-click="openLoginPopup($event)">Login</span> to view prices</span>
            </div>
            <div layout="row" layout-align="center center" flex="100" ng-if="loggedIn">
                <table>
                    <thead class="lot-pricing-head">
                        <td>
                            no. of lots
                        </td>
                        <td>
                            price/unit
                        </td>
                        <td>
                            your margin(upto)
                        </td>
                        <td>
                            lot price
                        </td>
                    </thead>
                    <tbody class="lot-pricing-detail">
                        <tr data-ng-repeat="pl in product.product_lot">
                            <td>
                                {{::pl.lot_size_from}}+
                            </td>
                            <td>
                                {{::pl.price_per_unit | number:0}}
                            </td>
                            <td>
                                {{::((product.price_per_unit-pl.price_per_unit)*100/product.price_per_unit | number:0)}}%
                            </td>
                            <td>
                                {{::pl.price_per_unit*product.lot_size | number:0}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div layout="row" class="padding-tb">
            <span flex hide-xs hide-sm></span>
            <md-button class="md-raised md-warn" ng-click="addToCart($event, product, true)" flex>
                <span aria-label="buy-now">BUY NOW</span>
            </md-button>
            <div flex layout="row" layout-wrap>
                <md-button class="md-raised" flex="100" ng-click="addToCart($event, product, false)" ng-disabled="pdInCart">
                    <span layout="row" flex layout-align="center center" ng-show="atcAPICall">
                        <md-progress-circular md-mode="indeterminate" class="md-warn" md-diameter="32"></md-progress-circular>
                    </span>
                    <span ng-show="!atcAPICall && !pdInCart" flex>ADD TO CART</span>
                    <span ng-if="pdInCart" flex style="color:#fff">ADDED TO CART</span>
                </md-button>
                <md-tooltip md-direction="top" ng-if="pdInCart && !isMobile">The product is already in cart!</md-tooltip>
            </div>
            <span flex hide-xs hide-sm></span>
        </div>
    </div>
</div>

<div layout="row" layout-wrap class="product-description-container" data-ng-if="productDetailsKeys">
    <div layout="column" class="product-details-wrap" flex="60" flex-xs="100">
        <span class="area-title">Product Details</span>
        <div layout="row" layout-wrap flex>
            <div layout="column" flex="33" flex-xs="100" flex-sm="50" data-ng-repeat="p in productDetailsKeys" ng-if="p.value!='None'">
                <div layout="column" class="feature-parent">
                    <span class="feature-title">{{p.label}}</span>
                    <span>{{p.value}}</span>
                </div>
            </div>
        </div>
    </div>
    <div layout="column" class="product-seller-details-container" flex-xs="100" flex-gt-xs="38">
        <span class="area-title">Manufacturer Details</span>
        <div layout="column" class="product-details-wrap">
            <div layout="column" class="feature-parent">
                <span class="feature-title">Name</span>
                <span>{{::product.seller.company_name}}</span>
            </div>
            <div layout="column" class="feature-parent">
                <span class="feature-title">Location</span>
                <span>{{::product.seller.address.city}}</span>
            </div>
            <div layout="column" class="feature-parent">
                <span class="feature-title">Speciality</span>
                <span>{{::product.category.display_name}}</span>
            </div>
        </div>
    </div>
</div>

<div wu-footer layout="row"></div>
